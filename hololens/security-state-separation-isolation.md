---
title: 状态分离和隔离
description: 了解 HoloLens 2 混合现实设备上的状态分离、隔离、代码签名和 Defender 应用程序。
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: 安全, hololens, 状态分离, 状态分离和隔离, hololens 2, hololens2 安全, 安全概述, 安全体系结构, 体系结构, hololens 2 体系结构
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens 2
ms.openlocfilehash: 60d6d7c0e281395957ce9158144a5f3d60927682
ms.sourcegitcommit: d20057957aa05c025c9838119cc29264bc57b4bd
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/21/2021
ms.locfileid: "11282803"
---
# <span data-ttu-id="46dce-104">状态分离和隔离</span><span class="sxs-lookup"><span data-stu-id="46dce-104">State separation and isolation</span></span>

<span data-ttu-id="46dce-105">状态分离和隔离可保护 Hololens 2 操作系统中的关键部分，防止其发生更改，例如操作系统启动进入受信任状态所需的部分。</span><span class="sxs-lookup"><span data-stu-id="46dce-105">State separation and isolation protects critical portions of the Hololens 2 operating system from change – such as those required for the operating system to boot into a trusted state.</span></span> <span data-ttu-id="46dce-106">借助隔离技术，不受信任的应用程序将被移至隔离的沙盒环境，以确保它们不会影响系统安全。</span><span class="sxs-lookup"><span data-stu-id="46dce-106">With isolation technology, untrusted apps are moved to an isolated sandbox environment, to ensure that they do not affect system security.</span></span>

## <span data-ttu-id="46dce-107">状态分离</span><span class="sxs-lookup"><span data-stu-id="46dce-107">State separation</span></span>

<span data-ttu-id="46dce-108">HoloLens 2 的状态分离极大地提高了安全性和可维护性（更新），并有助于保护应用程序数据。</span><span class="sxs-lookup"><span data-stu-id="46dce-108">State separation on HoloLens 2 vastly improves security and serviceability (updating) and helps protect your application data.</span></span>  <span data-ttu-id="46dce-109">状态分离的工作方式如下：</span><span class="sxs-lookup"><span data-stu-id="46dce-109">State separation works as follows:</span></span>
  * <span data-ttu-id="46dce-110">核心操作系统存储在核心操作系统卷中（受信任或经验证的 Microsoft 操作系统更新操作系统）。</span><span class="sxs-lookup"><span data-stu-id="46dce-110">The core operating system is stored in the core operating system volume (trusted or verified Microsoft OS updating the operating system).</span></span>
  * <span data-ttu-id="46dce-111">操作系统中可以在运行时更改的部分（例如可下载的驱动程序和配置），使用进一步的状态分离来对数据进行分区，并将其存储在安全的独立存储位置中。</span><span class="sxs-lookup"><span data-stu-id="46dce-111">The portions of the operating system that can be changed at run time (such as downloadable drivers and configurations), use further state separation to partition the data, and to store it in secure, separate storage locations.</span></span>
  * <span data-ttu-id="46dce-112">每个安全存储位置都有与之关联的独特安全策略，从而提供了各种安全优势，如以下部分所述。</span><span class="sxs-lookup"><span data-stu-id="46dce-112">Each secure storage location has distinct security policies associated with it, offering varied security advantages as detailed in the following section.</span></span>

## <span data-ttu-id="46dce-113">状态分离优势</span><span class="sxs-lookup"><span data-stu-id="46dce-113">State separation benefits</span></span>

  * <span data-ttu-id="46dce-114">安全性：HoloLens 2 中的状态分离功能可显著提高平台完整性、抵抗恶意软件和保护用户数据。</span><span class="sxs-lookup"><span data-stu-id="46dce-114">Security: The state separation featured in HoloLens 2 significantly improves platform integrity, malware resistance and user data protection.</span></span> <span data-ttu-id="46dce-115">通过分离操作系统的不可更改部分并将其设置为只读或受完整性保护，状态分离使恶意软件在冷启动期间难以持久存在。</span><span class="sxs-lookup"><span data-stu-id="46dce-115">By separating the unalterable part of the operating system and making it read-only or integrity protected, state separation makes it extremely difficult for malware to persist across a cold reboot.</span></span> 
  * <span data-ttu-id="46dce-116">更新：使用 HoloLens 2，一旦核心操作系统不可修改且与设备上的其余数据完全分开，更新就变得简单而可靠。</span><span class="sxs-lookup"><span data-stu-id="46dce-116">Updates: With HoloLens 2, once the core operating system is unmodifiable and has been cleanly separated from the rest of the data on the device, updates become simple and reliable.</span></span>  <span data-ttu-id="46dce-117">此外，状态分离为显著加快更新速度奠定了重要基础，这使得可以在一个步骤（原子单元）中更换操作系统。</span><span class="sxs-lookup"><span data-stu-id="46dce-117">In addition, state separation lays the vital groundwork for dramatically faster updates, which permits the operating system to be replaced in a single step (atomic unit).</span></span>
  * <span data-ttu-id="46dce-118">设备重置：HoloLens 2 重置可清除设备上用户生成的数据和用户应用数据（包括内部和外部存储位置）。</span><span class="sxs-lookup"><span data-stu-id="46dce-118">Device reset: HoloLens 2 reset clears user generated data and user app data on the device – including internal and external storage locations.</span></span> <span data-ttu-id="46dce-119">它将保留当前的 OS 应用和安全关键应用以及当前的 Microsoft 和 OEM 自定义应用（预安装）。</span><span class="sxs-lookup"><span data-stu-id="46dce-119">It preserves the current OS apps and security critical apps, and the current Microsoft and OEM customized apps (Preinstalled).</span></span> <span data-ttu-id="46dce-120">重置完成后，可以在设备上为这些预安装应用解除冻结</span><span class="sxs-lookup"><span data-stu-id="46dce-120">These Preinstalled apps can be rehydrated on the device after reset completes</span></span>

### <span data-ttu-id="46dce-121">状态分离状态</span><span class="sxs-lookup"><span data-stu-id="46dce-121">State separation states</span></span>

<span data-ttu-id="46dce-122">状态分离确保操作系统只能由 Microsoft 信任的设备组件进行更改，并且仅允许高值状态在重新启动后保持不变；其他系统状态仅在启动会话期间存在，并且在重新启动后将被丢弃。</span><span class="sxs-lookup"><span data-stu-id="46dce-122">State separation ensures the operating system can only be changed by Microsoft trusted device components and only high-value state is allowed to persist across reboots; other system state exists only for the duration of the boot session and is discarded after a reboot.</span></span> <span data-ttu-id="46dce-123">进行状态分离后，设备会迅速恢复到出厂状态。</span><span class="sxs-lookup"><span data-stu-id="46dce-123">Having state separation rapidly returns the device back to factory state.</span></span> <span data-ttu-id="46dce-124">Windows Holographic for Business 可以分为以下几种不同类别：</span><span class="sxs-lookup"><span data-stu-id="46dce-124">Windows Holographic for Business states can be divided into these distinct categories:</span></span>
  * <span data-ttu-id="46dce-125">核心操作系统 – 不可更改的状态</span><span class="sxs-lookup"><span data-stu-id="46dce-125">Core operating system – Unalterable state</span></span>
  * <span data-ttu-id="46dce-126">操作系统数据 – 不可更改的状态</span><span class="sxs-lookup"><span data-stu-id="46dce-126">Operating System Data – Alterable state</span></span> 
  * <span data-ttu-id="46dce-127">用户数据 – 可更改的状态</span><span class="sxs-lookup"><span data-stu-id="46dce-127">User Data – Alterable state</span></span>

<span data-ttu-id="46dce-128">下一节逐一介绍了这些 HoloLens 2 工作状态。</span><span class="sxs-lookup"><span data-stu-id="46dce-128">Each of these HoloLens 2 operating states is described in the following section.</span></span>

#### <span data-ttu-id="46dce-129">核心操作系统</span><span class="sxs-lookup"><span data-stu-id="46dce-129">Core operating system</span></span>

<span data-ttu-id="46dce-130">不可变状态由不可更改的可执行文件和数据组成，并且只能由 Microsoft 在安装更新的过程中进行更改。</span><span class="sxs-lookup"><span data-stu-id="46dce-130">An immutable state is comprised of executable files and data that are unalterable and can only be changed by Microsoft during the installation of updates.</span></span> <span data-ttu-id="46dce-131">在核心操作系统的此类更新期间，将启用一个包含最新所需操作状态的新映像。</span><span class="sxs-lookup"><span data-stu-id="46dce-131">During such an update of the core operating system, a new image containing the latest desired operating state is enabled.</span></span>
<span data-ttu-id="46dce-132">不可更改的状态被标记为只读（或以其他方式受完整性保护），从而防止任何具有提升特权的恶意软件持续存在。</span><span class="sxs-lookup"><span data-stu-id="46dce-132">The unalterable state is marked as read-only (or is otherwise integrity-protected), preventing persistence of any malware with elevated privileges.</span></span> <span data-ttu-id="46dce-133">以下可执行文件和数据以不可变状态受保护：</span><span class="sxs-lookup"><span data-stu-id="46dce-133">The following executable files and data are protected in the immutable state:</span></span>
  * <span data-ttu-id="46dce-134">Windows Holographic 收件箱驱动程序</span><span class="sxs-lookup"><span data-stu-id="46dce-134">Windows Holographic inbox drivers</span></span>
  * <span data-ttu-id="46dce-135">操作系统二进制文件</span><span class="sxs-lookup"><span data-stu-id="46dce-135">Operating system binaries</span></span>
  * <span data-ttu-id="46dce-136">Windows 收件箱驱动程序</span><span class="sxs-lookup"><span data-stu-id="46dce-136">Windows inbox drivers</span></span>
  * <span data-ttu-id="46dce-137">Windows 注册表配置单元 (HKLM) 中存储的静态 Windows Holographic 设置</span><span class="sxs-lookup"><span data-stu-id="46dce-137">Static Windows Holographic settings stored in Windows registry hive (HKLM)</span></span>
    * <span data-ttu-id="46dce-138">示例：HKLM 存储安装在计算机上的应用的配置信息。</span><span class="sxs-lookup"><span data-stu-id="46dce-138">Example: HKLM stores the configuration information for the apps installed on a machine.</span></span> <span data-ttu-id="46dce-139">它还会存储信息来检测硬件和相应的驱动程序。</span><span class="sxs-lookup"><span data-stu-id="46dce-139">It also stores information to detect hardware and the corresponding drivers.</span></span>
<span data-ttu-id="46dce-140">通过在不可变（完整性和只读保护）状态下保护它们，可确保核心操作系统始终启动到受信任状态。</span><span class="sxs-lookup"><span data-stu-id="46dce-140">By protecting these in the immutable (integrity and read-only protected) state, we ensure that the core operating system always boots into a trusted state.</span></span> <span data-ttu-id="46dce-141">此外，重置设备后，我们可以确保设备仅启动到该不可变部分的组件中。</span><span class="sxs-lookup"><span data-stu-id="46dce-141">Additionally, when a device is reset, we can ensure that the device boots only into the components that are on this immutable section.</span></span> 

#### <span data-ttu-id="46dce-142">操作系统数据</span><span class="sxs-lookup"><span data-stu-id="46dce-142">Operating system data</span></span> 

<span data-ttu-id="46dce-143">请务必注意，当数据损坏或泄露时，可在运行时更改（并且对操作系统功能并不重要）的可执行文件和数据可被丢弃，然后再重新创建。</span><span class="sxs-lookup"><span data-stu-id="46dce-143">It is important to note that executable files and data that are changeable at runtime (and are not critical to the operating system function), can be discarded and re-created when the data is corrupted or compromised.</span></span> <span data-ttu-id="46dce-144">高值可变状态要么是功能上操作系统要求持续存在，要么应在操作系统关闭期间和/或在受支持的 Windows 操作系统和设备方案重新启动之间持续存在。</span><span class="sxs-lookup"><span data-stu-id="46dce-144">A high-value alterable state is either functionally required to persist by the operating system, or expected to persist across operating system shutdown, and/or across reboots by supported Windows operating system and device scenarios.</span></span> <span data-ttu-id="46dce-145">高值可变状态的示例如下：</span><span class="sxs-lookup"><span data-stu-id="46dce-145">Examples of high-value mutable state are:</span></span>
  * <span data-ttu-id="46dce-146">IT 管理员配置的全局设备设置，例如为所有用户禁用位置。</span><span class="sxs-lookup"><span data-stu-id="46dce-146">IT Admin-configured global device settings, such as disabling the location for all users.</span></span>
  * <span data-ttu-id="46dce-147">Wi-fi 网络连接访问数据设备记住的网络以及关联的连接密码。</span><span class="sxs-lookup"><span data-stu-id="46dce-147">Wi-fi network connection access data-device-remembered networks and associated connection passwords.</span></span>
  * <span data-ttu-id="46dce-148">故障转储（包括设置、日志）。</span><span class="sxs-lookup"><span data-stu-id="46dce-148">Crash dumps including settings, logs.</span></span>
  * <span data-ttu-id="46dce-149">按需为新发现的设备下载的驱动程序。</span><span class="sxs-lookup"><span data-stu-id="46dce-149">Drivers downloaded on-demand for newly discovered devices.</span></span>
<span data-ttu-id="46dce-150">HoloLens 2 上的高值可更改状态位于操作系统数据安全位置上，既可以作为磁盘上的已保存文件，也可以作为保留的注册表配置单元。</span><span class="sxs-lookup"><span data-stu-id="46dce-150">A high-value alterable state on HoloLens 2 resides on the operating system Data security location, either as a saved file on disk or in a persisted registry hive.</span></span>

#### <span data-ttu-id="46dce-151">用户数据</span><span class="sxs-lookup"><span data-stu-id="46dce-151">User data</span></span>

<span data-ttu-id="46dce-152">最后一个状态类别表示由 UWP 应用程序或操作系统生成或保留的用户数据。</span><span class="sxs-lookup"><span data-stu-id="46dce-152">The last category of state represents user data produced or persisted by UWP applications or the operating system.</span></span> <span data-ttu-id="46dce-153">“下载”、“文档”、“视频”等所有已知用户文件夹、用户配置文件和 HKEY_CURRENT_USER 配置单元也存储在此位置。</span><span class="sxs-lookup"><span data-stu-id="46dce-153">All known user folders such as Downloads, Documents, Videos, user profiles and HKEY_CURRENT_USER hive are also stored in this location.</span></span> <span data-ttu-id="46dce-154">如果没有适当的凭据，则无法提取此数据；若要深入了解如何保护你的数据，请参阅[加密和数据保护](security-encryption-data-protection.md)。</span><span class="sxs-lookup"><span data-stu-id="46dce-154">This data cannot be extracted without proper credentials; to learn more about how your data is protected, see [Encryption and Data Protection](security-encryption-data-protection.md).</span></span>

##  <span data-ttu-id="46dce-155">隔离</span><span class="sxs-lookup"><span data-stu-id="46dce-155">Isolation</span></span>

<span data-ttu-id="46dce-156">为实现此平衡，HoloLens 2 拥有一个核心操作系统，可用于启动、硬件控制、登录等主要功能。在核心操作系统（预安装的应用程序和 UWP 应用）上仅运行两组应用程序。</span><span class="sxs-lookup"><span data-stu-id="46dce-156">To achieve this balance, HoloLens 2 has a core operating system that is used for primary functions such as booting up, hardware control, logging in etc. There are only two sets of applications that run on the core operating system – pre-installed applications and UWP apps.</span></span>

## <span data-ttu-id="46dce-157">代码签名</span><span class="sxs-lookup"><span data-stu-id="46dce-157">Code signing</span></span>

<span data-ttu-id="46dce-158">数字签名代码可以证明可执行文件和脚本没有被修改，因为它们是由受信任的源签名的，因此提供了真实性和完整性。</span><span class="sxs-lookup"><span data-stu-id="46dce-158">Digitally signing code allows substantiation that executables and scripts have not been modified since they were signed by a trusted source therefore providing authenticity and integrity.</span></span> <span data-ttu-id="46dce-159">默认情况下，HoloLens 2 信任的机构是 Microsoft 和 Microsoft Store。</span><span class="sxs-lookup"><span data-stu-id="46dce-159">The authorities that HoloLens 2 trusts by default are Microsoft and Microsoft Store.</span></span> <span data-ttu-id="46dce-160">IT 管理员可以通过 [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) 和 [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSP 将新证书添加到设备。</span><span class="sxs-lookup"><span data-stu-id="46dce-160">IT administrators can add new certificates to the device through the [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) and [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSPs.</span></span> <span data-ttu-id="46dce-161">他们还可以使用 [AllowAllTrustedApps 策略](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps)信任其他旁加载的应用或[业务线应用](https://docs.microsoft.com/intune/apps/lob-apps-windows)。</span><span class="sxs-lookup"><span data-stu-id="46dce-161">They can also use the [AllowAllTrustedApps policy](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) to trust additional sideloaded or [Line-of-business apps](https://docs.microsoft.com/intune/apps/lob-apps-windows).</span></span> <span data-ttu-id="46dce-162">证书驻留在本地计算机证书存储中，如果使用“设备”，则存储在 HKLM/Root 中；如果使用“用户”，则存储在 HKCU 中。</span><span class="sxs-lookup"><span data-stu-id="46dce-162">Certificates reside in the local machine certificate store which is stored in HKLM/Root if using “Device” or in HKCU if using “User”.</span></span>

## <span data-ttu-id="46dce-163">Defender 保护</span><span class="sxs-lookup"><span data-stu-id="46dce-163">Defender protections</span></span>
<span data-ttu-id="46dce-164">HoloLens 2 使用 Microsoft 服务为用户提供更高级别的安全性：</span><span class="sxs-lookup"><span data-stu-id="46dce-164">HoloLens 2 uses Microsoft services to give users an advanced level of security:</span></span>

* <span data-ttu-id="46dce-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) 由操作系统自动在 Windows Holographic 上启用，可防止 Edge 上的网络钓鱼和恶意软件以及潜在的恶意文件下载。</span><span class="sxs-lookup"><span data-stu-id="46dce-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) is automatically enabled on Windows Holographic by the OS and protects against phishing and malware, as well as the downloading of potentially malicious files, on Edge.</span></span> <span data-ttu-id="46dce-166">无法由用户关闭，但可通过策略禁用。</span><span class="sxs-lookup"><span data-stu-id="46dce-166">It cannot be turned off by the user but can be disabled through policy.</span></span>

* <span data-ttu-id="46dce-167">[Defender 防火墙](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security)会阻止未经授权的网络流量流向和来自你的设备。</span><span class="sxs-lookup"><span data-stu-id="46dce-167">[Defender Firewall](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) blocks unauthorized network traffic from flowing to and from your device.</span></span> <span data-ttu-id="46dce-168">默认情况下，它处于启用状态，且不能由客户通过本地操作或策略进行配置。</span><span class="sxs-lookup"><span data-stu-id="46dce-168">It is enabled by default and not configurable by the customer through local actions or policy.</span></span> 

* <span data-ttu-id="46dce-169">[Windows Defender 应用程序控件](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview)：HoloLens 2 支持 WDAC，它使 IT 管理员能够将应用程序控制策略推送到设备上。</span><span class="sxs-lookup"><span data-stu-id="46dce-169">[Windows Defender Application Control](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview):  HoloLens 2 supports WDAC which allows IT admin to push application control policies onto the device.</span></span> <span data-ttu-id="46dce-170">有关详细信息，请参阅[在具有 MSFT Intune 的 HoloLens 2 设备上使用 WDAC](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens)。</span><span class="sxs-lookup"><span data-stu-id="46dce-170">More info can be found in [Use WDAC on HoloLens 2 devices with MSFT Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens).</span></span> 

<span data-ttu-id="46dce-171">IT 管理员可以通过 [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) 管理 SmartScreen 行为，并通过[这些策略](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2)管理浏览器行为。</span><span class="sxs-lookup"><span data-stu-id="46dce-171">IT admins can manage SmartScreen behavior through [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) and browser behavior through [these policies](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2).</span></span> 

